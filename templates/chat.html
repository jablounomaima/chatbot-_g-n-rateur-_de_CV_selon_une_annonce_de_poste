<!DOCTYPE html>
<html>
<head>
  <title>Chat CV</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .chat { height: 70vh; overflow-y: scroll; border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
    .user { text-align: right; margin: 10px 0; }
    .bot { text-align: left; margin: 10px 0; }
  </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2>ðŸ’¬ Assistant CV</h2>
    <div id="chat" class="chat"></div>
    <input id="userInput" class="form-control" placeholder="Votre rÃ©ponse..." onkeydown="if(event.key==='Enter') sendMessage()">
    <button onclick="sendMessage()" class="btn btn-success mt-2">Envoyer</button>
    <a id="downloadBtn" href="/api/generate_cv" class="btn btn-primary mt-3 d-none">TÃ©lÃ©charger le CV</a>
  </div>
  <script>
    function addBotMessage(text, suggestion) {
      const div = document.createElement("div");
      div.className = "bot";
      div.innerHTML = `<strong>ðŸ¤– Bot :</strong> ${text}`;
    
      if (suggestion) {
        const sugDiv = document.createElement("div");
        sugDiv.className = "alert alert-light mt-2 border";
        sugDiv.style.fontSize = "0.9em";
        sugDiv.innerHTML = `
          <strong>ðŸ’¡ Suggestion :</strong><br>
          <em>${suggestion}</em><br>
          <button class="btn btn-sm btn-outline-success mt-1" onclick='useSuggestion(\`${suggestion}\`)'>
            âœ… Utiliser cette suggestion
          </button>
        `;
        div.appendChild(sugDiv);
      }
    
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }
    
    function useSuggestion(text) {
      document.getElementById("userInput").value = text;
    }
    </script>
</body>
</html>